---
title: 微信小程序开发问题记录 
tags: 微信小程序,原生
grammar_cjkRuby: true
date: 2019-6-13
---


## 聊天界面，新消息展现，页面自动滚动到底部效果

### 思路

获取 view 组件的默认页面流 Page 的高度，将滚动条向下滚动到这个高度。

### 实现

```javascript
Component({
  /**
   * 组件的属性列表
   */
  properties: {
    msgs: {
      type: Array,
      value: []
    }
  },

  /**
   * 组件的初始数据
   */
  data: {
  },

/**
 * 数据监听
 */
  observers: {
    // 当消息记录列表发生变化
    'msgs': function() {
      // 创建选择器，获取页面的高度，调整滚动
      let sid = setTimeout(() => {
        const query = this.createSelectorQuery()
        let el = query.select('.chat-message')
        el.boundingClientRect((rect) => {
		  //  滚动页面的距离
          wx.pageScrollTo({
            scrollTop: rect.bottom
          })
        }).exec()
        clearTimeout(sid)
      })
    }
  },

  /**
   * 组件的方法列表
   */
  methods: {}
})
```